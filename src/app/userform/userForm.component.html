<app-navbar></app-navbar>
<div class="container">
  <div class="row">
    <div class="mx-auto mt-3 col-sm-6 col-md-6">
      <h2>Modifica dati</h2>

      <label for="name">Nome:</label><input #name=ngModel name="name" id="name" type="text" class="form-control"
                                            required
                                            [(ngModel)]="user.name"/>
      <div *ngIf="name.invalid && (name.dirty || name.touched)"
           class="alert">
        <div *ngIf="name.errors?.['required']" style="color:red">
          Nome obbligatorio. Il nome non può iniziare con uno spazio.
        </div>
      </div>
      <label for="surname">Cognome:</label><input #surname=ngModel name="surname" id="surname" type="text"
                                                  class="form-control" required
                                                  [(ngModel)]="user.surname"/>
      <div *ngIf="surname.invalid && (surname.dirty || surname.touched)"
           class="alert">
        <div *ngIf="surname.errors?.['required']" style="color:red">
          Cognome obbligatorio. Il cognome non può iniziare con uno spazio.
        </div>
      </div>
      <label for="username">Username:</label><input #username=ngModel name="username" id="username" type="text"
                                                    class="form-control" required minlength="6"
                                                    [(ngModel)]="user.username"/>
      <div *ngIf="username.invalid && (username.dirty || username.touched)"
           class="alert">
        <div *ngIf="username.errors?.['required']" style="color:red">
          Username obbligatorio. L'username deve contenere almeno 8 caratteri e non può contenere spazi.
        </div>
        <div *ngIf="username.errors?.['minlength']" style="color:red">
          L'username deve essere lungo almeno 6 caratteri.
        </div>
      </div>
      <div *ngIf="showPasswordInput">
        <label for="password">Password:</label><input #password=ngModel name="password" id="password" type="text"
                                                      class="form-control" required minlength="6"
                                                      [(ngModel)]="user.password"/>
        <div *ngIf="password.invalid && (password.dirty || password.touched)"
             class="alert">
          <div *ngIf="password.errors?.['required']" style="color:red">
            Password obbligatoria. La password deve contenere almeno 8 caratteri e non può contenere spazi.
          </div>
          <div *ngIf="password.errors?.['minlength']" style="color:red">
            La password deve essere lungo almeno 6 caratteri.
          </div>
        </div>
      </div>
      <button type="button" class="mt-3 btn btn-success" (click)="post(user)">Conferma</button>
    </div>
  </div>
</div>
<div *ngIf="!valid" class="container">
  <div class="row">
    <div class="mx-auto mt-3 col-sm-6 col-md-6" style="color:red">
      <p>Compilazione campi errata!</p>
    </div>
  </div>
</div>
